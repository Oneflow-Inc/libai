name: Python checks

env:
  ONEFLOW_SRC: oneflow-src
on:
  pull_request:
    types: [review_requested]
    branches:
      - "*"
  workflow_dispatch:
    inputs:
      placeholder:
        description: "placeholder, no effect"
        required: false
jobs:
  check_license_and_format:
    name: License and format
    runs-on: ubuntu-18.04
    steps:
      - name: Check Python format
        id: py_check
        run: |
          python3 -m pip install black==19.10b0 autoflake==1.4 isort==5.9.3 flake8==3.9.2
          make lint
      - name: Please request CI again
        if: ${{ failure() }}
        run: |
          exit 1
